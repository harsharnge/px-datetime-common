<link rel="import" href="px-datetime-imports.html" />

<script>

/**
  ```pxDatetimeBehavior```

  This behavior is for all ```px-{datetime}-{picker}``` components.

  Dependencies: momentjs

  @polymerBehavior pxDatetimeBehavior
*/

var pxDatetimeBehavior = {

  properties: {
    /**
     *
     * Set this attribute when you do want to allow future dates in the 'px-date-panel' component.
     *
     * Defined In: 'pxDatetimeBehavior'
     *
     * @default false (future dates will be disabled and unclickable)
     */
    blockFutureDates: {
      type: Boolean,
      value: false
    },
    /**
     * Moment value with the date or time to display.  Will be parsed according to the moment format.  (see momentFormat property)
     * Default to now.
     * Defined In: 'pxDatetimeBehavior'
     *
     * @private
     */
    momentObj: {
      type: Object,
      notify: true,
      value: function() {
                return moment();
              }
    },
    /**
     *
     * Moment-timezone string for using a specific timezone. See
     * http://momentjs.com/timezone/docs/#/data-loading/getting-zone-names/
     *
     * if not provided tries to guess the current local
     */
    timeZone: {
      type: String,
      notify: true,
      value: function() {
        return moment.tz.guess();
      },
      observer: '_timeZoneChanged'
    }

  }, //properties close bracket

  /**
   * Takes an ISO 8601 String and returns a moment object
   *
   * Defined In: 'pxDatetimeBehavior'
   *
   * @param {String} timeString
   */
  _convertISOtoMoment: function(timeString) {
    if(this.isUtc) {
      return moment.utc(timeString, moment.ISO_8601);
    }
    else {
      return moment(timeString, moment.ISO_8601);
    }
  },
  /**
   * makes sure the moment object reflexts the timezone
   */
  _timeZoneChanged: function() {
    if(this.momentObj) {
      var newMom = this.momentObj.clone().tz(this.timeZone);
      this.set('momentObj', newMom);
    }
  }

}; //pxDatetimeBehavior close bracket



</script>
